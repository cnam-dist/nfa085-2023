<!DOCTYPE html>
<html>

<head>
    <title>UI Message avec Modal - Exemple</title>
    <meta charset="utf-8" />
    <!-- Charger les fichiers CSS de Semantic UI -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.9.2/dist/semantic.min.css">
</head>

<body>
<div class="ui container">
    <h1 class="ui header">UI Messages avec Modal - Exemple</h1>
<!-- Bouton pour afficher la modal -->
    <button class="ui basic button" id="btnOpenModal">
        <i class="plus icon"></i>
        Ajouter un message</button>
    <button class="ui black button" id="btnClearAll">
        <i class="remove icon"></i>
        Effacer tous les messages</button>

    <div class="ui segment" id="messagesContainer">
        <!-- Conteneur pour les messages -->
    </div>
    <!-- Modal -->
    <div class="ui modal" id="modalMessage">
        <div class="header">Ajouter un message</div>
        <div class="content">

            <!-- Formulaire pour ajouter un message -->
            <form class="ui form">
                <div class="field">
                    <label>Type de message</label>
                    <select class="ui dropdown" id="selectMessageType">
                        <option value="default">Défaut</option>
                        <option value="info">Information</option>
                        <option value="error">Erreur</option>
                        <option value="success">Succès</option>
                        <option value="warning">Avertissement</option>
                    </select>
                </div>
                <div class="field">
                    <label>Icône</label>
                    <select class="ui search dropdown" id="selectMessageIcon">
                        <option value="">Aucune</option>
                        <option value="exclamation triangle">Exclamation Triangle</option>
                        <option value="exclamation circle">Exclamation Circle</option>
                        <option value="check circle">Check Circle</option>
                        <option value="info circle">Info Circle</option>
                    </select>
                </div>
                <div class="field">
                    <label>Titre</label>
                    <input type="text" id="inputMessageTitle" placeholder="Titre du message">
                </div>
                <div class="field">
                    <label>Contenu</label>
                    <textarea rows="3" id="textareaMessageContent" placeholder="Contenu du message"></textarea>
                </div>
                <div class="field">
                    <div class="ui checkbox">
                        <input type="checkbox" tabindex="0">
                        <label>Message refermable</label>
                    </div>
                </div>
            </form>

        </div>
        <div class="actions">
            <button class="ui negative button">Annuler</button>
            <button class="ui positive button" id="btnAddMessage">Ajouter</button>
        </div>
    </div>
</div>
<!-- Charger les fichiers JavaScript de jQuery et Semantic UI -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fomantic-ui@2.9.2/dist/semantic.min.js"></script>

<script>
    $(document).ready(function () {
        // Initialiser la modal
        $('#modalMessage').modal();

        // Ouvrir la modal quand le bouton est cliqué
        $('#btnOpenModal').on('click', function () {
            $('#modalMessage').modal('show');
        });

        // Effacer tous les messages quand le bouton est cliqué
        $('#btnClearAll').on('click', function () {
            if($('#messagesContainer').children().length>0){
                defaultMessage();
                $.toast({
                    class: 'success',
                    title: 'Suppression de tous les messages',
                    message: 'Tous les messages ont été supprimés avec succès',
                })
            }

        });

        // Ajouter le message quand le bouton est cliqué
        $('#btnAddMessage').on('click', function () {
            // Récupérer les valeurs des champs
            $('#default-message').remove();
            let messageType = $('#selectMessageType').val();
            let messageIcon = $('#selectMessageIcon').val();
            let messageTitle = $('#inputMessageTitle').val();
            let messageContent = $('#textareaMessageContent').val();
            let closeable = $('#modalMessage .ui.checkbox').checkbox('is checked')?'<i class="close icon"></i>':'';
            // Générer le message au format HTML
            let messageHtml = `<div class="ui icon ${messageType} message">
                                    ${closeable}
                                  <i class="${messageIcon} icon"></i>
                                  <div class="content">
                                    <div class="header">
                                      ${messageTitle}
                                    </div>
                                    <p>${messageContent}</p>
                                  </div>
                                </div>`;
            // Ajouter le message à la page
            $('#messagesContainer').append(messageHtml);

            // Fermer la modal
            $('#modalMessage').modal('hide');

            // Réinitialiser les valeurs des champs
            $('#selectMessageType').dropdown('clear');
            $('#selectMessageIcon').dropdown('clear');
            $('#inputMessageTitle').val('');
            $('#textareaMessageContent').val('');
            $.toast({
                class: 'success',
                title: 'Ajout de message',
                message: 'Le message a été ajouté avec succès',
            })
            ;
        });
    });
    $('body')
        .on('click','.message .close', function() {
            $(this)
                .closest('.message')
                .transition('fade',500,
                    function() {
                        $(this).remove();
                        if($('#messagesContainer').children().length==0){
                            defaultMessage();
                        }
                    }
                )
            ;
            $.toast({
                class: 'success',
                title: 'Suppression de message',
                message: 'Le message a été supprimé avec succès',
            });
        })
    ;
    function defaultMessage(){
        let messageHtml = `<div class="ui icon message" id="default-message">
                                    <i class="comment alternate outline icon"></i>
                                    <div class="content">
                                        <div class="header">
                                          Message par défaut
                                        </div>
                                        <p>Aucun message</p>
                                    </div>
                                </div>`;
        $('#messagesContainer').empty().append(messageHtml);
    }
    defaultMessage();
    $('.ui.dropdown')
        .dropdown({
            allowAdditions: true,
            hideAdditions: false,
            className: {
                addition: 'stuck addition'
            }
        })
    ;
</script>
</body>
</html>


